<div class="message-cards-container">
    {% for message in messages %}
        <div class="card message-card">
            <a href="{{ path('app_message_detail', { 'messageId' : message.0.id }) }}">
                {% if message.status is same as(false) %}
                    <div class="badge badge-unread"></div>
                {% endif %}
                <div class="message-data">
                    <div class="author-container">
                        <i class="fa-solid fa-user"></i>
                        <p>{{  message.0.sender.firstname }}{{ message.0.sender.lastname }}</p>
                    </div>

                    <div class="date-container">
                        <i class="fa-solid fa-calendar-days"></i>
                        <p>{{ message.0.createdAt|format_datetime(locale=app.request.locale) }}</p>
                    </div>
                </div>

                <h2 class="title">
                    {% if message.0.isArchived %}
                        <span class="is_archived">[{{ 'message.index.archived'|trans }}]
                        </span>
                    {% endif %}
                    {{ message.0.title }}
                </h2>

                {% set content = message.0.content|striptags %}
                {% if content|length > 200 %}
                    <p class="content">{{ content|slice(0,200)|raw }}...</p>
                {% else %}
                    <p class="content">{{ content|raw }}</p>
                {% endif %}
            </a>
            {% if not message.0.isArchived and is_granted('ROLE_ADMIN') %}
                <div class="actions">
                    <a href="{{ path('app_message_update', { 'messageId' : message.0.id }) }}" class="btn"><i class="fa-regular fa-pen-to-square"></i> {{ 'message.index.btn.modify'|trans }}</a>
                    <a data-action-url=" {{ path('app_message_archive', { 'messageId' : message.0.id }) }}" class="btn btn-danger delete-button"><i class="fa-regular fa-folder-open"></i> {{ 'message.index.btn.archive'|trans }}</a>
                </div>
            {% endif %}
        </div>
    {% endfor %}
</div>